#include "pieces.h"
#include "board_display.h"

int pieces[7][4][4][4] = 
    {
     {{{0,0,0,0}, 
     {0,0,0,0},
     {0,0,1,0},
     {1,1,1,0}}, // L

     {{0,0,0,0},
     {1,1,0,0},
     {0,1,0,0},
     {0,1,0,0}},

     {{0,0,0,0},
     {0,0,0,0},
     {1,1,1,0},
     {1,0,0,0}},
     
     {{0,0,0,0},
     {1,0,0,0},
     {1,0,0,0},
     {1,1,0,0}}},
     /////////////////////////////////
     {{{2,0,0,0}, 
     {2,0,0,0},
     {2,0,0,0},
     {2,0,0,0}}, // straight

     {{0,0,0,0},
     {0,0,0,0},
     {0,0,0,0},
     {2,2,2,2}},

     {{2,0,0,0},
     {2,0,0,0},
     {2,0,0,0},
     {2,0,0,0}},
     
     {{2,0,0,0},
     {2,0,0,0},
     {2,0,0,0},
     {2,0,0,0}}},
     /////////////////////////////////
     {{{0,0,0,0}, 
     {0,0,0,0},
     {3,3,0,0},
     {3,3,0,0}}, // square

     {{0,0,0,0},
     {0,0,0,0},
     {3,3,0,0},
     {3,3,0,0}},

     {{0,0,0,0},
     {0,0,0,0},
     {3,3,0,0},
     {3,3,0,0}},
     
     {{0,0,0,0},
     {0,0,0,0},
     {3,3,0,0},
     {3,3,0,0}}},
      /////////////////////////////////
     {{{0,0,0,0}, 
     {0,0,0,0},
     {4,0,0,0},
     {4,4,4,0}},    // reverse L

     {{0,0,0,0},
     {0,4,0,0},
     {0,4,0,0},
     {4,4,0,0}},

     {{0,0,0,0},
     {0,0,0,0},
     {4,4,4,0},
     {0,0,4,0}},
    
     {{0,0,0,0},
     {4,4,0,0},
     {4,0,0,0},
     {4,0,0,0}}},
      /////////////////////////////////
     {{{0,0,0,0}, 
     {0,0,0,0},
     {0,5,0,0},
     {5,5,5,0}},    // T

     {{0,0,0,0},
     {0,5,0,0},
     {5,5,0,0},
     {0,5,0,0}},

     {{0,0,0,0},
     {0,0,0,0},
     {5,5,5,0},
     {0,5,0,0}},
     
     {{0,0,0,0},
     {5,0,0,0},
     {5,5,0,0},
     {5,0,0,0}}},
      /////////////////////////////////
     {{{0,0,0,0}, 
     {0,0,0,0},
     {0,6,6,0},
     {6,6,0,0}},    // Z

     {{0,0,0,0},
     {6,0,0,0},
     {6,6,0,0},
     {0,6,0,0}},

     {{0,0,0,0},
     {0,0,0,0},
     {0,6,6,0},
     {6,6,0,0}},
     
     {{0,0,0,0},
     {0,0,0,0},
     {0,6,6,0},
     {6,6,0,0}}},
      /////////////////////////////////
     {{{0,0,0,0}, 
     {0,0,0,0},
     {7,7,0,0},
     {0,7,7,0}},    // Reverse Z

     {{0,0,0,0},
     {0,7,0,0},
     {7,7,0,0},
     {7,0,0,0}},

     {{0,0,0,0},
     {0,0,0,0},
     {7,7,0,0},
     {0,7,7,0}},
     
     {{0,0,0,0},
     {0,0,0,0},
     {7,7,0,0},
     {0,7,7,0}}}};

void put_L(int board[ROWS][COLS],int col,int piece,int rota){
    // Other pieces detection
    int array = 0, test=0 , row =0;
     
    
   
        for(int i = 4;i<ROWS;i++){
            for(int k =4;k>0;k--){
                for(int j = 0;j<4;j++){
                    if((board[i][col+j]) != 0 && (pieces[piece][rota-1][k][j]) != 0 && (test == 0)){
                        array = i-k+3;
                        test = 1;
                        
                    
                    }
                }
            }
        }

    
    // Adjustments
    if((piece == 0) && (rota == 4))array++;
    if((piece == 1) && (rota == 2))array++;



    // Place pieces 
    for(int i = 0;i<4;i++){
        for(int j=0;j<4;j++){
            if(board[(array-4)+i][col+j] == 0)board[(array-4)+i][col+j] = pieces[piece][rota-1][i][j];
        }
    }
}   

